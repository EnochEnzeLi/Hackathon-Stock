import requests
import json
import  yfinance as yf
import pandas as pd
# stock_api = "A9KZ975WVJNRW"
stock_api = "EV86IOR2VLA2V2FO"
stock_symbol = "IBM"
stock_interval = "5min"
# url = f'https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol={stock_symbol}&interval={stock_interval}&apikey={stock_api}'
# r = requests.get(url)
# data = r.json()
# print(data)

historical = yf.Ticker(stock_symbol).history(interval="1m",period="1d")
print(historical)
# def NewSentimentFinancial():
    
#     url = f'https://www.alphavantage.co/query?function=NEWS_SENTIMENT&tickers={stock_symbol}&topics=earnings&apikey={stock_api}'
#     news = requests.get(url)
#     news = news.json()
#     return news
# news = NewSentimentFinancial()
# Object_news = {'items': '50', 'sentiment_score_definition': 'x <= -0.35: Bearish; -0.35 < x <= -0.15: Somewhat-Bearish; -0.15 < x < 0.15: Neutral; 0.15 <= x < 0.35: Somewhat_Bullish; x >= 0.35: Bullish', 'relevance_score_definition': '0 < x <= 1, with a higher score indicating higher relevance.', 'feed': [{'title': '2 Artificial Intelligence  ( AI )  Stocks That Offer Dividends and Long-Term Returns', 'url': 'https://www.fool.com/investing/2024/05/19/2-artificial-intelligence-ai-stocks-that-offer-div/', 'time_published': '20240519T114500', 'authors': ['Justin Pope'], 'summary': 'Collect some passive income while AI tailwinds drive growth at these companies.', 'banner_image': 'https://media.ycharts.com/charts/5cf1d7f7e924e473da00e09b4f5ed8cb.png', 'source': 'Motley Fool', 'category_within_source': 'n/a', 'source_domain': 'www.fool.com', 'topics': [{'topic': 'Financial Markets', 'relevance_score': 
# '0.87644'}, {'topic': 'Earnings', 'relevance_score': '0.744043'}, {'topic': 'Real Estate & Construction', 'relevance_score': '0.5'}, {'topic': 'Technology', 'relevance_score': '0.5'}], 'overall_sentiment_score': 0.336797, 'overall_sentiment_label': 'Somewhat-Bullish', 'ticker_sentiment': [{'ticker': 'KD', 'relevance_score': '0.062434', 'ticker_sentiment_score': '-0.010028', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'EQIX', 'relevance_score': '0.469099', 'ticker_sentiment_score': '0.250616', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'HCP', 'relevance_score': '0.124486', 'ticker_sentiment_score': '0.228813', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'IBM', 'relevance_score': '0.652756', 'ticker_sentiment_score': '0.497626', 'ticker_sentiment_label': 'Bullish'}]}, {'title': '3 Companies Already Working on the Next Phase of Artificial Intelligence  ( AI ) ', 'url': 'https://www.fool.com/investing/2024/05/19/3-companies-already-working-on-the-next-phase-of-a/', 'time_published': '20240519T110000', 'authors': ['Robert Izquierdo'], 'summary': "These businesses are building tech that could exceed the abilities of today's AI.", 'banner_image': 'https://g.foolcdn.com/editorial/images/777270/artificial_intelligence_robot_looking_at_equations_gettyimages-966248982-1200x772-f9fd0c6.jpg', 'source': 'Motley Fool', 'category_within_source': 'n/a', 'source_domain': 'www.fool.com', 'topics': [{'topic': 'Financial Markets', 'relevance_score': '0.316726'}, {'topic': 'Earnings', 'relevance_score': '0.214378'}, {'topic': 'Real Estate & Construction', 'relevance_score': '0.5'}, {'topic': 'Technology', 'relevance_score': '0.5'}], 'overall_sentiment_score': 0.231939, 'overall_sentiment_label': 'Somewhat-Bullish', 'ticker_sentiment': [{'ticker': 'MSFT', 'relevance_score': '0.363388', 'ticker_sentiment_score': '0.265101', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'IBM', 'relevance_score': '0.363388', 'ticker_sentiment_score': '0.261864', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'IONQ', 'relevance_score': '0.320676', 'ticker_sentiment_score': '0.262199', 'ticker_sentiment_label': 'Somewhat-Bullish'}]}, {'title': 'Prediction: This Will Be the Next Artificial Intelligence  ( AI )  Company to Split Its Stock', 'url': 'https://www.fool.com/investing/2024/05/19/prediction-this-will-be-the-next-artificial-intell/', 'time_published': '20240519T081000', 'authors': ['Adam Spatacco'], 'summary': 'Many big tech companies have completed stock splits over the last few years.', 'banner_image': 'https://g.foolcdn.com/image/?url=https%3A%2F%2Fg.foolcdn.com%2Feditorial%2Fimages%2F777474%2Fgettyimages-1473149698.jpg&op=resize&w=700', 'source': 'Motley Fool', 'category_within_source': 'n/a', 'source_domain': 'www.fool.com', 'topics': [{'topic': 'IPO', 'relevance_score': '0.310843'}, {'topic': 'Retail & Wholesale', 'relevance_score': '0.333333'}, {'topic': 'Financial Markets', 'relevance_score': '0.897321'}, {'topic': 'Manufacturing', 'relevance_score': '0.333333'}, {'topic': 'Earnings', 'relevance_score': '0.360215'}, {'topic': 'Technology', 'relevance_score': '0.333333'}], 'overall_sentiment_score': 0.255218, 'overall_sentiment_label': 'Somewhat-Bullish', 'ticker_sentiment': [{'ticker': 'MSFT', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.167801', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'NVDA', 'relevance_score': '0.115787', 'ticker_sentiment_score': '0.160106', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'AAPL', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.111982', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'TSLA', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.111982', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'IBM', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.167801', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'NOW', 'relevance_score': '0.691995', 'ticker_sentiment_score': '0.453466', 'ticker_sentiment_label': 'Bullish'}, {'ticker': 'AWON', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.221094', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'AMZN', 'relevance_score': '0.058047', 'ticker_sentiment_score': '0.111982', 'ticker_sentiment_label': 'Neutral'}]}, {'title': '3 Dividend-Paying Tech Stocks to Buy in May', 'url': 'https://www.fool.com/investing/2024/05/18/3-dividend-paying-tech-stocks-to-buy-in-may/', 'time_published': '20240518T113000', 'authors': ['Will Healy'], 'summary': 'Yes, some of the most attractive income stocks have ties to the tech industry.', 'banner_image': 'https://g.foolcdn.com/editorial/images/777500/getty-dividend-income.jpg', 'source': 'Motley Fool', 'category_within_source': 'n/a', 'source_domain': 'www.fool.com', 'topics': [{'topic': 'Financial Markets', 'relevance_score': '0.503496'}, {'topic': 'Earnings', 'relevance_score': '0.538269'}, {'topic': 'Real Estate & Construction', 'relevance_score': '0.5'}, {'topic': 'Technology', 'relevance_score': '0.5'}], 'overall_sentiment_score': 0.239899, 'overall_sentiment_label': 'Somewhat-Bullish', 'ticker_sentiment': [{'ticker': 'CCI', 'relevance_score': '0.201944', 'ticker_sentiment_score': '0.016585', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'TMUS', 'relevance_score': '0.051003', 'ticker_sentiment_score': '-0.149378', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'CSCO', 'relevance_score': '0.250902', 'ticker_sentiment_score': '0.28726', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'IBM', 'relevance_score': '0.345674', 'ticker_sentiment_score': '0.229068', 'ticker_sentiment_label': 'Somewhat-Bullish'}]}, {'title': 'Arrow Electronics  ( ARW )  & Resideo to Help Habitat for Humanity', 'url': 'https://www.zacks.com/stock/news/2275424/arrow-electronics-arw-resideo-to-help-habitat-for-humanity', 'time_published': '20240517T124300', 'authors': ['Zacks Equity Research'], 'summary': 'Arrow Electronics (ARW) partners with Resideo to help Habitat for Humanity create an innovative smart home community.', 'banner_image': 'https://staticx-tuner.zacks.com/images/articles/main/d3/848.jpg', 'source': 'Zacks Commentary', 'category_within_source': 'n/a', 'source_domain': 'www.zacks.com', 'topics': [{'topic': 'Retail & Wholesale', 'relevance_score': '0.333333'}, {'topic': 'Manufacturing', 'relevance_score': '0.333333'}, {'topic': 'Earnings', 'relevance_score': '0.158519'}, {'topic': 'Technology', 'relevance_score': '0.333333'}], 'overall_sentiment_score': 0.302761, 'overall_sentiment_label': 'Somewhat-Bullish', 'ticker_sentiment': [{'ticker': 'MSFT', 'relevance_score': '0.053153', 'ticker_sentiment_score': '0.167979', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'VMW', 'relevance_score': '0.053153', 'ticker_sentiment_score': '0.095976', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'AVGO', 'relevance_score': '0.053153', 'ticker_sentiment_score': '0.095976', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'HCP', 'relevance_score': '0.261117', 'ticker_sentiment_score': '0.239381', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'REZI', 'relevance_score': '0.10607', 'ticker_sentiment_score': '0.250591', 'ticker_sentiment_label': 'Somewhat-Bullish'}, {'ticker': 'IBM', 'relevance_score': '0.261117', 'ticker_sentiment_score': '0.024873', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'ARW', 'relevance_score': '0.406197', 'ticker_sentiment_score': '0.420174', 'ticker_sentiment_label': 'Bullish'}]}, {'title': 'Snowflake Analysts Remain Overweight: Potential Growth Despite Iceberg Adoption Concerns - Snowflake  ( NYSE:SNOW ) ', 'url': 'https://www.benzinga.com/analyst-ratings/analyst-color/24/05/38880436/snowflake-analysts-remain-overweight-potential-growth-despite-iceberg-adoption-conc', 'time_published': '20240516T174729', 'authors': ['Anusuya Lahiri'], 'summary': 'Piper Sandler analyst Brent A.', 'banner_image': 'https://cdn.benzinga.com/files/images/story/2024/05/16/snowflake-shutter.jpeg?width=1200&height=800&fit=crop', 'source': 'Benzinga', 'category_within_source': 'Trading', 'source_domain': 'www.benzinga.com', 'topics': [{'topic': 'Earnings', 'relevance_score': '0.365926'}, {'topic': 'Technology', 'relevance_score': '1.0'}, {'topic': 'Financial Markets', 'relevance_score': '0.108179'}], 'overall_sentiment_score': 0.061702, 'overall_sentiment_label': 'Neutral', 'ticker_sentiment': [{'ticker': 'MSFT', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'NFLX', 'relevance_score': '0.191675', 'ticker_sentiment_score': '-0.028329', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'GOOG', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'AAPL', 'relevance_score': '0.191675', 'ticker_sentiment_score': '-0.028329', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'CRWD', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'EBAY', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'IBM', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'SNOW', 'relevance_score': 
# '0.533241', 'ticker_sentiment_score': '0.049949', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'DDOG', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.018417', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'PINS', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'UBER', 'relevance_score': '0.128478', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'TCTZF', 'relevance_score': '0.064449', 'ticker_sentiment_score': '0.0', 'ticker_sentiment_label': 'Neutral'}]}, {'title': 'Palo Alto  ( PANW ) , IBM Team Up to Provide AI-Powered Solutions', 'url': "https://www.zacks.com/stock/news/2274820/palo-altional Business Machines to improve its security platforms with the latter\'s artificial intelligence capabilities to deliver AI-powered security solutions.", 'banner_image': 'https://staticx-tuner.zacks.com/images/articles/main/d3/848.jpg', 'source': 'Zacks Commentary', 'category_within_source': 'n/a', 'source_domain': 'www.zacks.com', 'topics': [{'topic': 
# 'ticker_sentiment': [{'ticker': 'IBM', 'relevance_score': '0.492324', 'ticker_sentiment_score': '0.464959', 'ticker_sentiment_label': 'Bullish'}, {'ticker': 'APPF', 'relevance_score': '0.223522', 'ticker_sentiment_score': '0.144901', 'ticker_sentiment_label': 'Neutral'}, {'ticker': 'PANW', 'relevance_score': '0.492324', 'ticker_sentiment_score': '0.420069', 'ticker_sentiment_label': 'Bullish'}]}, {'title': "Palo Alto Networks Stock Is Getting A Lift From IBM Thursday: What's Going On? - Palo Alto Networks  ( NASDAQ:PANW ) ", 'url': 'https://www.benzinga.com/news/24/05/38873036/palo-alto-networks-stock-is-getting-a-lift-from-ibm-thursday-whats-going-on', 'time_published': '20240516T132033', 'authors': ['Adam Eckert'], 'summary': 'Palo Alto Networks Inc PANW shares are rising slightly Thursday. The company and International Business Machines Corp IBM announced a partnership to deliver AI-p'}]}
# Object_news = json.loads(news)
# Object_news = news["items"]



